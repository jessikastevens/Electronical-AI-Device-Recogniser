this is the fixes that chatgbt reomended you can test it if you wish
@app.route('/ai', methods=['POST'])
def ai_route():
    data = request.get_json()
    
    real_power = float(data['Real Power'])
    reactive_power = float(data['Reactive Power'])
    rms_current = float(data['RMS Current'])
    frequency = float(data['Frequency'])
    rms_voltage = float(data['RMS Voltage'])
    phase_angle = float(data['Phase Angle'])
    date = data['Date']
    time = data['time']

    combined_datetime = datetime.strptime(f"{date} {time}", '%Y-%m-%d %H:%M:%S')
    combined_datetime_str = combined_datetime.strftime('%Y-%m-%d %H:%M:%S')

    ordered_array = [frequency, phase_angle, real_power, reactive_power, rms_current, rms_voltage]

    data_dict = {
        "features": ordered_array,
        "time": combined_datetime_str
    }

    # Log the input data
    print(f"Input data: {data_dict}")

    response = requests.post(os.getenv('AI_API_URL'), json=data_dict)
    ai_response = response.json()

    # Log the AI response
    print(f"AI response: {ai_response}")

    predicted_class = ai_response['predicted_class']
    raw_prediction = ai_response['raw_prediction']

    formatted_prediction = {
        APPLIANCE_TAGS[i + 1]: round(prob, 2)
        for i, prob in enumerate(raw_prediction)
    }

    predicted_appliance = APPLIANCE_TAGS[predicted_class + 1]

    return jsonify({
        "predicted_appliance": predicted_appliance,
        "raw_predictions": formatted_prediction
    })